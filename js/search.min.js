"use strict";let titleList=Object.keys(Object.assign(STORE,PAST));const search=document.getElementById("search"),titles=document.getElementById("titles");let indexLi=99;function results(e){let t=e.target.value;if(indexLi=99,t){titles.style.display="",titles.innerHTML="";let e=100;for(let i of titleList)if(i.toLocaleLowerCase().includes(t.toLocaleLowerCase())){let t=document.createElement("li");t.innerHTML=i,t.setAttribute("id",e.toString()),t.setAttribute("tabindex",(e-100).toString()),e++,t.addEventListener("click",(function(){streamInfo(this.innerHTML),search.value=""})),t.addEventListener("mousemove",(e=>{indexLi=parseInt(e.target.id);let t=document.querySelector(".active");t&&t.classList.remove("active"),document.getElementById(indexLi.toString()).classList.add("active")})),titles.append(t)}100==e&&(titles.style.display="none")}else titles.style.display="none"}function move(e){let t=document.getElementById((indexLi+e).toString());t&&(t.classList.add("active"),t.focus(),search.focus(),t.nextElementSibling&&t.nextElementSibling.classList.remove("active"),t.previousElementSibling&&t.previousElementSibling.classList.remove("active"),document.getElementById((indexLi+e).toString())&&(indexLi+=e))}search.onkeyup=e=>{switch(e.key){case"Enter":let t=document.getElementById((99==indexLi?indexLi+1:indexLi).toString());t&&(streamInfo(t.innerHTML),search.value=""),search.value="",titles.style.display="none",search.blur();break;case"Backspace":case"Delete":results(e);break;case"Escape":e.target.blur();break;default:1==e.key.length&&results(e)}},search.onkeydown=e=>{switch(e.keyCode){case 38:move(-1),e.preventDefault();break;case 40:move(1),e.preventDefault()}},search.onclick=e=>{results(e)},search.addEventListener("focusout",(e=>{titles.style.display="none",e.relatedTarget&&("active"==e.relatedTarget.className?titles.style.display="":"titles"==e.relatedTarget.parentElement.id&&e.relatedTarget.click())}));
